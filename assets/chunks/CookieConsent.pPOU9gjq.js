import{_ as e,u as t,p as a,h as s,v as o,b as i,o as l,w as n,c,e as r,j as u,n as d,t as v,a as p,F as b,B as g,aj as m,am as k,T as f}from"./framework.DJtYh1Hc.js";import{s as y}from"./supabase.CObNuoaU.js";const h={key:0,class:"cookie-overlay"},w={key:0,class:"main-view"},z={class:"content"},C={class:"actions"},_={class:"btn-group"},A={key:1,class:"customizer-view"},S={class:"header"},x={class:"category-list"},j={class:"cat-info"},I={class:"cat-toggle"},N=["id","onUpdate:modelValue","disabled"],q=["for"],U={class:"footer"},B="tp-cookie-consent",E=e({__name:"CookieConsent",setup(e){const{lang:E}=t(),F=a(!1),O=a(!1),P=a({essential:!0,analytics:!0,marketing:!1,personalization:!0,data_collection:!0}),R={en:{title:"Cookie & Privacy Settings",message:"We use cookies and collect limited personal information to improve your experience and support our mission of transparent AI education.",acceptAll:"Accept All",rejectAll:"Reject Non-Essential",save:"Save My Choice",customize:"Customize Settings",back:"Back",categories:{essential:{title:"Strictly Necessary",desc:"Required for the website to function. Cannot be disabled."},data_collection:{title:"Necessary Data Collection",desc:"Basic device info (browser, language) collected to ensure site compatibility and security."},analytics:{title:"Performance & Analytics",desc:"Help us understand how visitors interact with the site to improve content."},personalization:{title:"Personalization",desc:"Remember your preferences like language and theme settings."},marketing:{title:"Marketing & Social",desc:"Used for social media integration and relevant announcements."}}},zh:{title:"Cookie 与隐私设置",message:"我们使用 Cookie 并收集有限的个人信息，以提升您的体验并支持我们透明 AI 教育的使命。",acceptAll:"全部接受",rejectAll:"拒绝非必要",save:"保存设置",customize:"自定义设置",back:"返回",categories:{essential:{title:"核心运行必要",desc:"网站运行所必需的基础功能，无法禁用。"},data_collection:{title:"必要信息收集",desc:"收集基础设备信息（浏览器、语言）以确保网站兼容性与安全。"},analytics:{title:"性能与分析",desc:"帮助我们了解访问者如何与网站互动，以改进内容。"},personalization:{title:"个性化偏好",desc:"记住您的偏好，如语言和主题设置。"},marketing:{title:"营销与社交",desc:"用于社交媒体集成和相关公告。"}}}},D=s(()=>E.value.startsWith("zh")?R.zh:R.en),J=()=>{const e=navigator.userAgent;return e.includes("Firefox")?"Firefox":e.includes("Chrome")?"Chrome":e.includes("Safari")?"Safari":e.includes("Edge")?"Edge":"Unknown"},M=async e=>{if(!(()=>{if("undefined"==typeof navigator)return!0;const e=navigator.userAgent.toLowerCase();return!!["googlebot","bingbot","yandexbot","baiduspider","slurp","duckduckbot","ia_archiver","facebot","facebookexternalhit","twitterbot","rogerbot","linkedinbot","embedly","quora link preview","showyoubot","outbrain","pinterest/0.","developers.google.com/+/web/snippet","slackbot","vkshare","redditbot","applebot","whatsapp","flipboard","tumblr","bitlybot","skypeuripreview","nuzzel","discordbot","google pagead","qwantify","pinterestbot","bitrix link preview","xing-content-proxy","cogentbot","facebookplatform","messengerbot","guzzlehttp","python-requests","curl","wget","headless","phantomjs","selenium"].some(t=>e.includes(t))||!!navigator.webdriver})()&&y)try{const t={region:navigator.language,device:navigator.platform,browser:J()};await y.from("site_consents").insert({consent_prefs:e,region:t.region,device:t.device,browser:t.browser})}catch(t){}};o(()=>{const e=localStorage.getItem(B);if(e)try{const t=JSON.parse(e);P.value={...P.value,...t}}catch(t){F.value=!0}else setTimeout(()=>{F.value=!0},1200)});const T=e=>{localStorage.setItem(B,JSON.stringify({...e,timestamp:(new Date).toISOString()})),M(e),F.value=!1},V=()=>{const e={essential:!0,analytics:!0,marketing:!0,personalization:!0,data_collection:!0};P.value=e,T(e)},W=()=>{const e={essential:!0,analytics:!1,marketing:!1,personalization:!1,data_collection:!0};P.value=e,T(e)},H=()=>{T(P.value)};return(e,t)=>(l(),i(f,{name:"fade-up"},{default:n(()=>[F.value?(l(),c("div",h,[u("div",{class:d(["cookie-card",{"is-customizing":O.value}])},[O.value?(l(),c("div",A,[u("div",S,[u("button",{onClick:t[1]||(t[1]=e=>O.value=!1),class:"btn-back"},[t[3]||(t[3]=u("i",{class:"fas fa-arrow-left"},null,-1)),p(" "+v(D.value.back),1)]),u("h3",null,v(D.value.customize),1)]),u("div",x,[(l(!0),c(b,null,g(D.value.categories,(e,t)=>(l(),c("div",{key:t,class:"category-item"},[u("div",j,[u("h4",null,v(e.title),1),u("p",null,v(e.desc),1)]),u("div",I,[m(u("input",{type:"checkbox",id:"cookie-"+t,"onUpdate:modelValue":e=>P.value[t]=e,disabled:"essential"===t||"data_collection"===t},null,8,N),[[k,P.value[t]]]),u("label",{for:"cookie-"+t},null,8,q)])]))),128))]),u("div",U,[u("button",{onClick:H,class:"btn-solid full-width"},v(D.value.save),1)])])):(l(),c("div",w,[t[2]||(t[2]=u("div",{class:"icon-box"},[u("i",{class:"fas fa-cookie-bite"})],-1)),u("div",z,[u("h3",null,v(D.value.title),1),u("p",null,v(D.value.message),1)]),u("div",C,[u("button",{onClick:t[0]||(t[0]=e=>O.value=!0),class:"btn-text"},v(D.value.customize),1),u("div",_,[u("button",{onClick:W,class:"btn-outline"},v(D.value.rejectAll),1),u("button",{onClick:V,class:"btn-solid"},v(D.value.acceptAll),1)])])]))],2)])):r("",!0)]),_:1}))}},[["__scopeId","data-v-602e619d"]]);export{E as default};
