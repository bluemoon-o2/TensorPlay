import{_ as o,c as s,o as a,a4 as t}from"./chunks/framework.t-GQSDtj.js";const d=JSON.parse('{"title":"tensorplay.utils.hooks","description":"","frontmatter":{},"headers":[],"relativePath":"zh/api/hooks.md","filePath":"zh/api/hooks.md"}'),i={name:"zh/api/hooks.md"};function r(n,e,l,h,p,u){return a(),s("div",null,[...e[0]||(e[0]=[t('<div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>该页面尚未翻译。 以下内容为英文原版。</p></div><h1 id="tensorplay-utils-hooks" tabindex="-1">tensorplay.utils.hooks <a class="header-anchor" href="#tensorplay-utils-hooks" aria-label="Permalink to &quot;tensorplay.utils.hooks&quot;">​</a></h1><h2 id="classes" tabindex="-1">Classes <a class="header-anchor" href="#classes" aria-label="Permalink to &quot;Classes&quot;">​</a></h2><h3 id="class-backwardhook-source" tabindex="-1"><code>class BackwardHook</code> <a href="https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L92" target="_blank" rel="noreferrer">[source]</a> <a class="header-anchor" href="#class-backwardhook-source" aria-label="Permalink to &quot;`class BackwardHook` [[source]](https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L92)&quot;">​</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BackwardHook(module, user_hooks, user_pre_hooks)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>A wrapper class to implement nn.Module backward hooks.</p><p>It handles:</p><ul><li>Ignoring non-Tensor inputs and replacing them by None before calling the user hook</li><li>Generating the proper Node to capture a set of Tensor&#39;s gradients</li><li>Linking the gradients captures for the outputs with the gradients captured for the input</li><li>Calling the user hook once both output and input gradients are available</li></ul><details><summary>Methods</summary><h4 id="init-self-module-user-hooks-user-pre-hooks-source" tabindex="-1"><code>__init__(self, module, user_hooks, user_pre_hooks)</code> <a href="https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L103" target="_blank" rel="noreferrer">[source]</a> <a class="header-anchor" href="#init-self-module-user-hooks-user-pre-hooks-source" aria-label="Permalink to &quot;`__init__(self, module, user_hooks, user_pre_hooks)` [[source]](https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L103)&quot;">​</a></h4><p>Initialize self. See help(type(self)) for accurate signature.</p><hr><h4 id="setup-input-hook-self-args-source" tabindex="-1"><code>setup_input_hook(self, args)</code> <a href="https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L190" target="_blank" rel="noreferrer">[source]</a> <a class="header-anchor" href="#setup-input-hook-self-args-source" aria-label="Permalink to &quot;`setup_input_hook(self, args)` [[source]](https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L190)&quot;">​</a></h4><hr><h4 id="setup-output-hook-self-args-source" tabindex="-1"><code>setup_output_hook(self, args)</code> <a href="https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L199" target="_blank" rel="noreferrer">[source]</a> <a class="header-anchor" href="#setup-output-hook-self-args-source" aria-label="Permalink to &quot;`setup_output_hook(self, args)` [[source]](https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L199)&quot;">​</a></h4><hr></details><h3 id="class-removablehandle-source" tabindex="-1"><code>class RemovableHandle</code> <a href="https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L9" target="_blank" rel="noreferrer">[source]</a> <a class="header-anchor" href="#class-removablehandle-source" aria-label="Permalink to &quot;`class RemovableHandle` [[source]](https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L9)&quot;">​</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RemovableHandle(hooks_dict: Any, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, extra_dict: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">Any</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">-&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>A handle which provides the capability to remove a hook.</p><h4 id="args" tabindex="-1">Args <a class="header-anchor" href="#args" aria-label="Permalink to &quot;Args&quot;">​</a></h4><ul><li><strong>hooks_dict</strong> (<code>dict</code>): A dictionary of hooks, indexed by hook <code>id</code>.</li><li><strong>extra_dict</strong> (<code>Union[dict, List[dict]]</code>): An additional dictionary or list of dictionaries whose keys will be deleted when the same keys are removed from <code>hooks_dict</code>.</li></ul><details><summary>Methods</summary><h4 id="init-self-hooks-dict-any-extra-dict-any-none-none-source" tabindex="-1"><code>__init__(self, hooks_dict: Any, *, extra_dict: Any = None) -&gt; None</code> <a href="https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L23" target="_blank" rel="noreferrer">[source]</a> <a class="header-anchor" href="#init-self-hooks-dict-any-extra-dict-any-none-none-source" aria-label="Permalink to &quot;`__init__(self, hooks_dict: Any, *, extra_dict: Any = None) -&gt; None` [[source]](https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L23)&quot;">​</a></h4><p>Initialize self. See help(type(self)) for accurate signature.</p><hr><h4 id="remove-self-none-source" tabindex="-1"><code>remove(self) -&gt; None</code> <a href="https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L34" target="_blank" rel="noreferrer">[source]</a> <a class="header-anchor" href="#remove-self-none-source" aria-label="Permalink to &quot;`remove(self) -&gt; None` [[source]](https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L34)&quot;">​</a></h4><hr></details><h2 id="functions" tabindex="-1">Functions <a class="header-anchor" href="#functions" aria-label="Permalink to &quot;Functions&quot;">​</a></h2><h3 id="unserializable-hook-source" tabindex="-1"><code>unserializable_hook()</code> <a href="https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L71" target="_blank" rel="noreferrer">[source]</a> <a class="header-anchor" href="#unserializable-hook-source" aria-label="Permalink to &quot;`unserializable_hook()` [[source]](https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L71)&quot;">​</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">unserializable_hook(f)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Mark a function as an unserializable hook with this decorator.</p><p>This suppresses warnings that would otherwise arise if you attempt to serialize a tensor that has a hook.</p><h3 id="warn-if-has-hooks-source" tabindex="-1"><code>warn_if_has_hooks()</code> <a href="https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L82" target="_blank" rel="noreferrer">[source]</a> <a class="header-anchor" href="#warn-if-has-hooks-source" aria-label="Permalink to &quot;`warn_if_has_hooks()` [[source]](https://github.com/bluemoon-o2/tensorplay/blob/main/tensorplay/utils/hooks.py#L82)&quot;">​</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">warn_if_has_hooks(tensor)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>',22)])])}const b=o(i,[["render",r]]);export{d as __pageData,b as default};
